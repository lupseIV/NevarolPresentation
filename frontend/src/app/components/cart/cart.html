<div class="container">
  <h1>Shopping Cart</h1>
  
  @if (cartItems.length === 0) {
    <p>Your cart is empty. <a routerLink="/products">Continue shopping</a></p>
  } @else {
    <table class="table">
      <thead>
        <tr>
          <th>Product</th>
          <th>Price</th>
          <th>Quantity</th>
          <th>Total</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (item of cartItems; track item.productId) {
          <tr>
            <td>{{ item.product.name }}</td>
            <td>${{ item.product.price }}</td>
            <td>
              <input type="number" [value]="item.quantity" 
                     (change)="updateQuantity(item.productId, +$any($event.target).value)"
                     min="1" style="width: 60px;">
            </td>
            <td>${{ (item.product.price * item.quantity).toFixed(2) }}</td>
            <td>
              <button class="btn btn-danger" (click)="removeItem(item.productId)">Remove</button>
            </td>
          </tr>
        }
      </tbody>
    </table>
    
    <div style="text-align: right; margin-top: 2rem;">
      <h3>Total: ${{ total.toFixed(2) }}</h3>
      <button class="btn btn-danger" (click)="clearCart()" style="margin-right: 1rem;">Clear Cart</button>
      <a routerLink="/checkout" class="btn btn-success">Proceed to Checkout</a>
    </div>
  }
</div>
